define("article:widget/dom-ready/dom-ready.js",function(e,t){function n(e){return(parseInt(e,10)+p.length)%p.length}function o(e){if(f[e])return f[e];var t=p[e];if(r.dom.getAttr(t,"data-text"))return r.dom.getAttr(t,"data-text");for(var n=t;(n=r.dom.getParent(n))&&!r.dom.hasClass(n,"exp-content-block"););var o=r.trim(r.dom.query(".exp-content-body",n)[0].innerText);return o="END"===o.slice(-3)?o.slice(0,-3):o,f[e]=o,o}function i(e){return e===m?(l.play(),r.dom.addClass(p[m],"playing"),1):(r.dom.removeClass(p[0>m?0:m],"playing"),m=n("next"===e?m+1:e),r.dom.addClass(p[m],"playing"),l.changeText(o(m)),void l.play())}function a(e){r.dom.removeClass(p[n(e)],"playing"),l.pause()}function d(){if("undefined"==typeof Audio)return 1;l=new u({onplay:function(){s.send(location.href,2019,{module:"article",page:"index",pos:"audio",action:"play"})},onended:function(){r.dom.removeClass(p[m],"playing"),m<p.length-1&&i("next")}}),p.forEach(function(e,t){r.dom.setAttr(e,"data-index",t),r.dom.setStyle(e,"display","inline-block"),r.on(e,"click",function(){var e=parseInt(r.dom.getAttr(this,"data-index"),10);return l.paused||e!==m?(i(e),void s.send(location.href,2019,{module:"article",page:"index",pos:"audio-play",action:"click"})):(a(e),s.send(location.href,2019,{module:"article",page:"index",pos:"audio-pause",action:"click"}),1)})}),c.on("douwan-video/play",function(){a(m)});var e=0;$(".bottom-text-ads").find("#EC_l").find("a").find(".EC_tit").each(function(t,n){"block"===$(n).css("display")&&"hidden"!==$(n).css("visibility")&&e++}),s.send(window.location,2019,{module:"article",page:"index",pos:"bottom",action:"show",adCount:e})}var l,r=e("common:widget/lib/tangram/base/base.js"),s=e("common:widget/ui/log/log.js"),c=e("common:widget/lib/fis/event/event.js").eventCenter,u=e("common-jquery:widget/js/logic/text2audio/text2audio.es").Text2Audio,m=-1,p=r.dom.query(".audio-wp"),f=[];t.init=d});